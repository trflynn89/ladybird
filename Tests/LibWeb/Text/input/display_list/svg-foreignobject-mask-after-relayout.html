<!DOCTYPE html>
<script src="../include.js"></script>
<svg width="100" height="100" viewBox="0 0 100 100">
  <mask id="m1">
    <circle cx="50" cy="50" r="50" fill="white"/>
  </mask>
  <foreignObject id="fo" x="0" y="0" width="100" height="100" mask="url(#m1)">
    <div xmlns="http://www.w3.org/1999/xhtml" style="width:100px;height:100px;background:black;"></div>
  </foreignObject>
</svg>
<script>
test(() => {
    // Force initial layout
    internals.dumpDisplayList();

    // Trigger partial SVG relayout by mutating an SVG attribute on foreignObject
    document.getElementById("fo").setAttribute("transform", "translate(1, 0)");

    // Capture display list after relayout before any println() calls.
    // println() modifies the DOM which would force a full layout rebuild
    // instead of the partial SVG relayout path we're testing.
    let displayList = internals.dumpDisplayList();

    println(displayList);
});
</script>
